var app = angular.module('myApp', ['ui.bootstrap']); app.filter('startFrom', function() {return function(input, start) {if (input) {start = +start; return input.slice(start); } return []; } }); app.controller('post', function($scope, $http, $window) {$scope.filter_content = ''; $scope.filter_date = ''; $scope.totalItems = 0; $scope.rows = function() {$(".bg-preload").show(); $(".bg-list").hide(); $("#datepicker").val(''); var req = {method: 'GET', url: $("#url").val() + '/getSearch/' + $("#lang").val() + '/' + $("#q").val() + '/' + $("#date").val() + '/' + $("#type").val(), headers: {'Accept': 'application/json', 'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8;', 'x-api-key': 'rwWjQk8TPaJAcbDqi4i9TDTXWHxQzpqzdLnM5ttKYMmYpTjLp6'} }; $http(req).then(function successCallback(response) {$scope.items = response.data.items; $scope.content = response.data.content; $scope.currentPage = 1; $scope.entryLimit = 8; $scope.filteredItems = $scope.items.length; $scope.totalItems = $scope.items.length; $("#p-result").show(); $(".bg-preload").hide(); $(".bg-list").show(); }); }; $scope.rows(); $scope.setPage = function(pageNo) {$scope.currentPage = pageNo; }; $scope.filter = function() {if ($("#search-1").val() == '') {$scope.filteredItems = $scope.items.length; $scope.totalItems = $scope.items.length; } else {$scope.filteredItems = $scope.filtered.length; $scope.totalItems = $scope.filtered.length; } }; $scope.sort_by = function(predicate) {$scope.predicate = predicate; $scope.reverse = !$scope.reverse; }; $scope.filterContent = function(name, id) {$scope.filter_content = name; $("#type").val(id); $scope.rows(); }; $scope.removeContent = function() {$scope.filter_content = ''; $("#type").val('all'); $scope.rows(); }; $scope.filterDate = function(date) {$scope.filter_date = date; $("#date").val(date); $scope.rows(); }; $scope.removeDate = function() {$scope.filter_date = ''; $("#date").val('0'); $scope.rows(); }; }); if($(".datepicker").length){var elems = document.querySelectorAll('.datepicker'); var instances = M.Datepicker.init(elems); } $(document).ready(function() {if($(".datepicker").length){if ($("#lang").val() == 'es') {$('.datepicker').datepicker({format: 'yyyy-mm-dd', closeOnSelect: true, i18n: {cancel: 'Cancelar', done: 'Seleccionar', months: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'], monthsShort: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'], weekdays: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'], weekdaysShort: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'], weekdaysAbbrev: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'], }, onClose: function() {setDate(); } }); } else {$('.datepicker').datepicker({format: 'yyyy-mm-dd', closeOnSelect: true, i18n: {cancel: 'Cancel', done: 'Select', months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'], monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'], weekdays: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'], weekdaysShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'], weekdaysAbbrev: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'], }, onClose: function() {setDate(); } }); } } }); function setDate() {if ($("#datepicker").val() != "") {angular.element($('[ng-controller="post"]')).scope().filterDate($("#datepicker").val()); } }; function bsfecha() {$('.datepicker').click(); } 